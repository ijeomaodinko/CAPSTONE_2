import getShows from '../modules/getShows.js';
import getComments from  '../modules/getComments'

const btn = document.querySelector('.btn_comment');

class CommentsPage {
    URL = 'https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/zl4d7ivkemottvg2fudz/comments';

    constructor(shows, btn) {
      [this.show] = shows.moviesarray.filter((show) => show.id === +btn.id);
      this.getShows = new getShows(this.URL);
      this.commentsArray = [];
    }
//To create template to render the items in the modal

    renderMovies() {
      const html = `
  <section class="sectionModal">
  <p class="close">&times</p>
  <article class="movies">
  <img class="moviesImg" src="${this.show.image.medium}" />
  <div class="movieData">
      <h3 class="moviesName">${this.show.name}</h3>
      <div class="item1"> </div>
       <p class="moviesRow"><span></span>${this.show.summary}</p>
  </div>
  </article>
  <div><img src=""/>
  <i onclick="myFunction(this)" class="fa fa-heart" id="total_i"></i>
  <p class="likesCounter">p<p></div>
  
  <div class=comment_container>
  <p class="comment_counter">p</p>
  <div class=comment_box> </div>
  </div>
  
  <div>
  <p class="write_comment">Write Comment</p>
  <input type="text" class="input_name"></input>
  <input type="textarea" class="input_comment"></input>
  <button type="button" class="btn btn_primary btn_movies">Comment</button>
  </div> 
  </section>`;

      const commentsPage = document.querySelector('.commentSection');
      const popUp = commentsPage.querySelector('.sectionModal');
      popUp.innerHTML = html;

      this.getComments();
    }
  }

  //to add eventlistner to comment button
  btn.addEventListener('click', renderMovies());